# 產品規格文件：個人資產管理系統

## 1. 產品概述

個人資產管理系統是一款專為個人用戶設計的 Android 應用程序，旨在簡化資產清單的創建和管理過程。該系統允許用戶通過掃描條碼快速添加物品，管理物品信息，並生成基本報表。

## 2. 目標用戶

主要是我想管理我的個人用品，並且希望能夠透過條碼掃描快速添加物品，並且可以自定義物品的類型和屬性。
內容多半參考 itemtopia 的功能，但是 itemtopia 的功能太多，我只需要一部分功能，所以我會將 itemtopia 的功能簡化，並且只保留我需要的功能。

## 3. 核心功能

### 3.1 用戶管理（優先級：5，與雲同步一起實現）

- 用戶註冊：使用電子郵件作為唯一帳號
- 用戶登錄：使用電子郵件和密碼
- 密碼管理：包括更改密碼和忘記密碼功能
- 電子郵件驗證流程

### 3.2 物品管理（優先級：1）

#### 3.2.1 添加物品
- 手動輸入物品信息
- 通過掃描條碼快速添加（優先級：2）
  - 使用 UPC 搜索商品信息並自動填充
- 支持批量快速添加模式

#### 3.2.2 編輯物品
- 修改物品的所有屬性
- 上傳和管理物品照片

#### 3.2.3 刪除物品
- 支持單個和批量刪除

#### 3.2.4 物品列表
- 支持分頁加載和虛擬滾動
- 提供基本的排序和篩選功能

### 3.3 物品類型管理

- 預設類型：電子產品和收藏品
- 支持用戶自定義新類型
- 每種類型可以定義特定的屬性

### 3.4 數據可視化和報表（優先級：4）

- 基本的統計功能（如按類型統計物品數量）
- 生成簡單的資產報告

## 4. 技術規格

### 4.1 平台
- 初始版本：Android
- 未來擴展：考慮跨平台開發架構

### 4.2 數據存儲
- 本地存儲：SQLite 數據庫
- 設計考慮未來雲同步功能

### 4.3 用戶界面
- 遵循 Material Design 準則
- 顏色主題：提供綠、紅、藍、黃四種基礎色調，並且以此基礎新增高光綠、陰影綠、高光紅、陰影紅、高光藍、陰影藍、高光黃、陰影黃四種配色，以此構成一個完整的配色系統。
  - 採用低彩度、低飽和度配色
- 每個頁面呈現精簡信息，採用分層信息展示系統

### 4.4 性能優化
- 實施分頁加載
- 使用虛擬滾動技術處理長列表

## 5. 安全性

- 本地數據暫時不考慮這塊，等到用戶登入和雲端同步時再考慮。
- 用戶數據隔離：每個用戶只能訪問自己的數據
- 本地數據加密存儲
- 安全的用戶認證機制

## 6. 未來擴展性

- 雲端同步和備份（優先級：5）
- 多平台支持（優先級：6）
- 高級統計和報告功能 （優先級：4.5）
- 自定義條碼識別和數據填充規則 (暫時未規劃功能，但是確實有這個需求)

## 7. 開發階段（更新） 

1. MVP（最小可行產品）：基本物品管理功能 
2. 條碼掃描和快速添加功能 
3. 報表和統計功能 
4. 用戶管理系統和雲端同步功能 
5. 多平台支持

## 8. 具體功能詳細說明

### 8.1 新增物品

#### 功能描述
- 支持手動輸入和條碼掃描兩種方式
- 條碼掃描支持 barcode 和 QR code

#### 紀錄信息

##### 物品基本信息
1. 物品名稱（字串，最多 100 字）
2. 物品類型（用戶可自定義）
3. 條碼信息
   - 條碼類型
   - 條碼內容
   - 條碼圖片
4. 照片（支持多張）
5. 物品詳細信息（根據物品類型動態顯示），一個物品可以有多個物品詳細信息的欄位設定

舉例而言，我的物品可以有兩個物品詳細信息 
1. 物品詳細信息名稱：尺寸, 物品詳細信息圖標：{圖標資源} optional, 支持的數據類型：字串, 支持的類型選項：[大, 中, 小], 物品詳細信息的值：小 
2. 物品詳細信息名稱：顏色, 物品詳細信息圖標：{圖標資源} optional, 支持的數據類型：字串, 支持的類型選項：[], 物品詳細信息的值："#FF000000"

#### 物品類型定義
此為預設的物品詳細信息資料，用戶不能增減，但是可以修改
1. 類型名稱 物品類型
2. 類型圖標
3. 該類型特有的詳細信息字段列表，預設 ["收藏", "電子產品", "其他"]
4. 數據類型：字串
5. 值的預設值： "",
6. 是否預設：true

##### 物品詳細信息定義
- 名稱：物品詳細信息名稱
- 圖標：物品詳細信息圖標
- 支持的數據類型：字串、時間、數字、十進制、日期、時間和日期、持續時間、布林值、自定義選項、金額
- 支持類型的選項陣列：[大, 中, 小]   (假如我的支持類型是陣列的話，這個功能可以之後再做，這邊寫出來只是為了紀錄之後可能的需求)
- 值：物品詳細信息的值
- 值的預設值：物品詳細信息的值的預設值
- 是否預設：是否為該類型的預設物品詳細信息  

### 8.2 物品列表

- 支持分頁加載
- 提供多種排序選項（如按名稱、添加日期等）
- 支持按類型篩選

### 8.3 物品類型管理

暫時不做類型管理，只根據選項陣列做搜尋條件

## 9. 畫面切換流程

### 9.1 主要畫面流程

1. 啟動畫面
2. 主頁面（物品列表）
   - 頂部搜索欄
   - 新增物品按鈕（固定在右下角，有個圓形中間是`+`號的圖標）
   - 物品列表（支持滑動和下拉刷新）
3. 新增物品頁面
   - 手動輸入選項
   - 掃描條碼選項
4. 物品詳情頁面
5. 編輯物品頁面
6. 物品詳細信息管理頁面
7. 設置頁面 （先預留位置，但是還沒規劃好詳細功能）

### 9.2 畫面切換流程說明

1. 啟動畫面 → 主頁面
   - 應用啟動時顯示啟動畫面，然後自動跳轉到主頁面

2. 主頁面 → 新增物品頁面
   - 點擊右下角的新增按鈕，這時會彈出一個選擇框，讓用戶選擇手動輸入或掃描條碼
   - 選擇手動輸入或掃描條碼

3. 新增物品頁面（掃描條碼）→ 編輯物品頁面
   - 掃描成功後自動跳轉到編輯物品頁面，並預填充相關信息

4. 主頁面 → 物品詳情頁面
   - 點擊列表中的物品項目

5. 物品詳情頁面 → 編輯物品頁面
   - 點擊編輯按鈕

6. 主頁面 → 物品類型管理頁面
   - 通過主菜單或設置頁面進入

7. 主頁面 → 設置頁面
   - 點擊頂部的設置圖標或通過側邊欄進入

### 9.3 手勢和轉場效果

1. 使用標準的 Android 材料設計轉場效果
2. 支持以下手勢：
   - 向左滑動返回上一頁
   - 在列表中下拉刷新
   - 長按列表項目進入多選模式

### 9.4 導航結構

- 使用底部導航欄，包含以下選項：
  1. 首頁（物品列表）
  2. 類別（裡面依照類型的選項陣列分類顯示 query 結果）
  3. 統計
  4. 設置

- 每個主要頁面都有一個頂部應用欄，包含：
  1. 頁面標題
  2. 搜索圖標（如適用）
  3. 更多選項菜單（如適用）

### 9.5 彈出視窗和對話框

1. 確認刪除對話框
2. 選擇物品類型對話框（新增物品時）
3. 篩選選項彈出視窗（在物品列表頁面）
4. 排序選項彈出視窗（在物品列表頁面）

### 9.6 錯誤處理和提示

- 使用 Snackbar 顯示簡短的成功或錯誤消息
- 對於需要用戶立即注意的錯誤，使用對話框
- 在進行長時間操作時（如同步數據），顯示進度條或加載動畫

## 10. 屬性的一些想法

您的數據模型設計思路很好，它清晰地定義了物品（Item）和物品詳細資訊類型（ItemDetail）的結構。這種設計允許靈活地管理不同類型的物品及其屬性。讓我們深入分析一下這個模型，並提供一些建議：



1. Item 模型：
   - 結構清晰，包含了基本的物品信息。
   - 對於 `paths` 和 `details`，考慮使用關聯表而不是陣列，這樣可以更好地支持查詢和管理。

2. ItemDetail 模型：
   - 良好的設計，允許自定義不同類型的詳細資訊。
   - `value_type` 和 `value_options` 的組合提供了很好的靈活性。

建議和考慮事項：

1. 關聯表：
   - 為 `paths` 創建一個 `ItemImage` 表，包含 `id`、`item_id` 和 `path`。
   - 為 `details` 創建一個 `ItemDetailValue` 表，包含 `id`、`item_id`、`item_detail_id` 和 `value`。

2. 索引：
   - 在 `Item` 表的 `code_content` 列上添加索引，以加速條碼查詢。
   - 在關聯表中的外鍵列（如 `item_id`）上添加索引。

3. 數據類型：
   - 對於 `code_type`，考慮使用枚舉類型或參照表，而不是直接存儲字符串。
   - 在 `ItemDetail` 的 `value_type` 中，明確定義支持的類型（如 TEXT、INTEGER、FLOAT、DATE 等）。

4. 約束：
   - 在 `Item` 表中添加唯一約束，確保 `code_content` 不重複（如果這是業務需求）。
   - 在 `ItemDetailValue` 表中添加唯一約束 (`item_id`, `item_detail_id`)，確保每個物品的每種詳細資訊只有一個值。

5. 預設值：
   - 在 `Item` 表中，考慮為 `name` 添加非空約束和預設值。

6. 時間戳：
   - 在 `Item` 和 `ItemDetail` 表中添加 `created_at` 和 `updated_at` 列，用於追蹤記錄的創建和更新時間。

7. 軟刪除：
   - 如果需要支持物品的軟刪除，可以添加一個 `deleted_at` 時間戳列。

8. 版本控制：
   - 如果需要支持物品資訊的版本控制，考慮添加一個 `version` 列。

9. 本地化支持：
   - 如果將來需要多語言支持，考慮將可本地化的文本（如物品名稱、詳細資訊名稱）設計為可擴展的結構。

10. 查詢優化：
    - 根據常見的查詢模式，可能需要添加組合索引，例如 (`item_detail_id`, `value`) 在 `ItemDetailValue` 表上。

11. 數據驗證：
    - 在應用層實現 `value` 與 `value_type` 和 `value_options` 的一致性檢查。

12. 存儲考慮：
    - 對於 `paths` 和 `code_pic_path`，確保存儲的是相對路徑，便於未來可能的數據遷移。

13. 擴展性：
    - 考慮添加一個通用的 `metadata` JSON 列在 `Item` 表中，用於存儲不需要常規查詢的額外信息。

這個數據模型為您的應用提供了一個堅實的基礎。它靈活enough以支持各種類型的物品和屬性，同時也具有良好的查詢性能和數據完整性。實施時，請確保在應用層面正確處理數據驗證和一致性檢查。

您對這個數據模型有什麼其他考慮或疑問嗎？或者您希望我詳細解釋某個特定方面？



---


# 個人資產管理系統規格書

## 1. 產品目的

開發一款簡單的個人資產管理 Android 應用程式，讓使用者能夠快速記錄和管理個人物品，支援條碼掃描快速添加物品，並且可以自定義物品的類型和屬性。

## 2. 基礎功能

### 2.1 物品管理
- 新增物品（手動輸入）
- 編輯物品
- 刪除物品
- 查看物品列表（支援分頁加載和虛擬滾動）

### 2.2 條碼掃描
- 支援 barcode 和 QR code 掃描
- 通過掃描快速新增物品

### 2.3 物品類型
- 預設類型：電子產品、收藏品、其他
- 支援用戶自定義新類型

## 3.資料模型

### 1. Item（物品）
- id: Integer (主鍵)
- name: String (物品名稱，最多 100 字)
- category_id: Integer (外鍵，關聯到 ItemCategory)
- code_type: String (條碼類型，可為空)
- code_content: String (條碼內容，可為空)
- code_image_id: Integer (外鍵，關聯到 Image，代表條碼圖片)
- cover_image_id: Integer (外鍵，關聯到 Image，代表物品封面圖片)
- created_at: Timestamp
- updated_at: Timestamp

### 2. ItemCategory（物品類別）
- id: Integer (主鍵)
- name: String (類別名稱，如"電子產品"、"收藏品"等)
- created_at: Timestamp
- updated_at: Timestamp

### 3. CategoryAttribute（類別屬性）
- id: Integer (主鍵)
- category_id: Integer (外鍵，關聯到 ItemCategory)
- name: String (屬性名稱，如"品牌"、"價格"等)
- is_required: Boolean (是否為必填屬性)
- is_editable: Boolean (是否可編輯，如"名稱"屬性可能不可編輯)
- value_type: String (值類型，如"text", "number", "date"等)
- default_value: String (預設值，可為空)
- created_at: Timestamp
- updated_at: Timestamp

### 4. ItemAttributeValue（物品屬性值）
- id: Integer (主鍵)
- item_id: Integer (外鍵，關聯到 Item)
- attribute_id: Integer (外鍵，關聯到 CategoryAttribute)
- value: String (屬性值)
- created_at: Timestamp
- updated_at: Timestamp

### 5. Image（圖片）
- id: Integer (主鍵)
- file_path: String (圖片檔案路徑)
- item_id: Integer (外鍵，關聯到 Item)
- order: Integer (相同 item 中圖片順序)
- content: String (圖片敘述)
- created_at: Timestamp
- updated_at: Timestamp

## 4. 使用流程

1. 啟動應用程式
2. 主頁面（物品列表）
   - 頂部搜索欄
   - 新增物品按鈕（固定在右下角，圓形中間是 + 號的圖標）
   - 物品列表（支援滑動和下拉刷新）
3. 新增物品
   - 選擇手動輸入或掃描條碼
   - 填寫物品資訊
   - 選擇性上傳照片
   - 儲存物品
4. 查看物品詳情
5. 編輯物品
6. 刪除物品

## 5. 未來功能 Backlog

1. 用戶管理系統
2. 雲端同步和備份
3. 多平台支援
4. 高級統計和報告功能
5. 自定義條碼識別和資料填充規則
6. 物品詳細資訊管理頁面
7. 設置頁面